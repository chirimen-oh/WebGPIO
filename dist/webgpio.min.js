"use strict";!function(){window.GPIOAccess||!function(){window.GPIOAccess=function(t){this.init(t)};var t={PORTS:{CN1:[{port:256},{port:257},{port:283},{port:284},{port:196},{port:197},{port:198},{port:199},{port:244},{port:243},{port:246},{port:245}],CN2:[{port:163},{port:253},{port:252},{port:193},{port:192},{port:353}]}};GPIOAccess.prototype={init:function(n){var r=this;this.ports=new GPIOPortMap;var o=function(t){return r.ports.set(t.port,new GPIOPort(t.port))};t.PORTS.CN1.forEach(o),t.PORTS.CN2.forEach(o)},ports:null,unexportAll:null,onchange:null}}()}(),function(){window.GPIOPort||!function(){window.GPIOPort=function(t){this.init(t)};var t={IN:"in",OUT:"out"},n={ROW:0,HIGH:1};GPIOPort.prototype={init:function(t){navigator.mozGpio["export"](t),this.portNumber=t,this.portName="",this.pinName="",this.direction="",this.exported=!1,this._interval=30,this.value=null,this._timer=null},"export":function(n){var r=this,o={"in":function(){return r._timer=setInterval(function(){return r.__checkValue(r)},r._interval)},out:function(){return r._timer?clearInterval(r._timer):0}},i=function(i,e){var u=o[n];u?(navigator.mozGpio.setDirection(r.portNumber,n===t.OUT),u(),i()):e(new Error("InvalidAccessError"))},e=function(t){return r.direction=n,r.exported=!0,t},u=function(t){return r.direction="",r.exported=!1,r.pinName="",r.portName="",Promise.reject(t)};return new Promise(i).then(e)["catch"](u)},unexport:function(t){},read:function(){var t=this,n=function(n,r){t.exported?t.__isInput()||r(new Error("OperationError")):r(new Error("InvalidAccessError")),n()},r=function(){return navigator.mozGpio.getValue(t.portNumber)};return new Promise(n).then(r)},write:function(t){var r=this,o=function(o,i){r.exported?r.__isOutput()?t!==n.ROW&&t!==n.HIGH&&i(new Error("OperationError")):i(new Error("OperationError")):i(new Error("InvalidAccessError")),o()},i=function(){return r.value=t,navigator.mozGpio.setValue(r.portNumber,r.value),r.value};return new Promise(o).then(i)},onchange:null,__isInput:function(){return this.direction===t.IN},__isOutput:function(){return this.direction===t.OUT},__checkValue:function(t){return t.read().then(function(n){parseInt(n)!=parseInt(t.value)&&("function"==typeof t.onchange?t.onchange(t):console.log("port.onchange is not a function."),t.value=n)})}}}()}(),function(){window.GPIOPortMap||(window.GPIOPortMap=Map)}(),function(){navigator.requestGPIOAccess||(navigator.requestGPIOAccess=function(){return new Promise(function(t){return t(new GPIOAccess)})})}(),function(){navigator.mozGpio||(navigator.mozGpio=new Object,navigator.mozGpio["export"]=function(t){},navigator.mozGpio.unexport=function(t){},navigator.mozGpio.setValue=function(t,n){},navigator.mozGpio.getValue=function(t){return t},navigator.mozGpio.setDirection=function(t,n){},navigator.mozGpio.getDirection=function(){return"out"})}();