!function(){"use strict";window.GPIOAccess||(window.GPIOAccess=function(t){this.init(t)},GPIOAccess.prototype={init:function(t){this.ports=new Map,navigator.mozGpio["export"](t),this.ports.set(t-0,new GPIOPort(t)),console.log("size="+this.ports.size)}})}(),function(){"use strict";window.GPIOPort||(window.GPIOPort=function(t){this.init(t)},GPIOPort.prototype={init:function(t){this.portNumber=t,this.direction="out",this.interval=30,this.value=null,this.timer=null},setDirection:function(t){return new Promise(function(i,n){if("in"===t||"out"===t){if(this.direction=t,navigator.mozGpio.setDirection(this.portNumber,"out"===t),"in"===t){console.log("in");var o=this;this.timer=setInterval(this.checkValue,this.interval,o)}else console.log("out"),this.timer&&clearInterval(this.timer),console.log("time");i()}else n({message:"invalid direction"})}.bind(this))},isInput:function(){return"in"===this.direction},read:function(){return new Promise(function(t,i){this.isInput()?t(navigator.mozGpio.getValue(this.portNumber)):i({message:"invalid direction"})}.bind(this))},write:function(t){return new Promise(function(i,n){this.isInput()?n({message:"invalid direction"}):(navigator.mozGpio.setValue(this.portNumber,t),i(t))}.bind(this))},checkValue:function(t){t.read().then(function(i){null!=t.value&&parseInt(i)!=parseInt(t.value)&&("function"==typeof t.onchange?t.onchange(i):console.log("port.onchange is not a function.")),t.value=i},function(){console.log("check value error")})},onchange:null})}(),function(){"use strict";navigator.requestGPIOAccess||(navigator.requestGPIOAccess=function(t){return new Promise(function(i,n){navigator.mozGpio||(navigator.mozGpio=new Object,navigator.mozGpio["export"]=function(t){},navigator.mozGpio.unexport=function(t){},navigator.mozGpio.setValue=function(t,i){console.log("setValue("+t+","+i+")")},navigator.mozGpio.getValue=function(t){return t},navigator.mozGpio.setDirection=function(t,i){console.log("setDirection("+t+","+i+")")},navigator.mozGpio.getDirection=function(){return"out"});var o=new GPIOAccess(t);i(o)})})}();