"use strict";!function(){window.GPIOAccess||(window.GPIOAccess=function(n){this.init(n)},GPIOAccess.prototype={init:function(n){this.ports=new GPIOPortMap,navigator.mozGpio["export"](n),this.ports.set(n-0,new GPIOPort(n)),console.log("size="+this.ports.size)}})}(),function(){window.GPIOPort||!function(){window.GPIOPort=function(n){this.init(n)};var n={IN:"in",OUT:"out"},t={ROW:0,HIGH:1};GPIOPort.prototype={init:function(n){this.portNumber=n,this.portName="",this.pinName="",this.direction="",this.exported=!1,this._interval=30,this.value=null,this._timer=null},"export":function(t){var o=this,r={"in":function(){return o._timer=setInterval(function(){return o.__checkValue(o)},o._interval)},out:function(){return o._timer?clearInterval(o._timer):0}},i=function(i,e){var u=r[t];u?(navigator.mozGpio.setDirection(o.portNumber,t===n.OUT),u(),i()):e(new Error("InvalidAccessError"))},e=function(n){return o.direction=t,o.exported=!0,n},u=function(n){return o.direction="",o.exported=!1,o.pinName="",o.portName="",Promise.reject(n)};return new Promise(i).then(e)["catch"](u)},unexport:function(n){},read:function(){var n=this,t=function(t,o){n.exported?n.__isInput()||o(new Error("OperationError")):o(new Error("InvalidAccessError")),t(navigator.mozGpio.getValue(n.portNumber))};return new Promise(t)},write:function(n){var o=this,r=function(r,i){o.exported?o.__isOutput()?n!==t.ROW&&n!==t.HIGH&&i(new Error("OperationError")):i(new Error("OperationError")):i(new Error("InvalidAccessError")),o.value=n,navigator.mozGpio.setValue(o.portNumber,o.value),r(o.value)};return new Promise(r)},onchange:null,__isInput:function(){return this.direction===n.IN},__isOutput:function(){return this.direction===n.OUT},__checkValue:function(n){return n.read().then(function(t){parseInt(t)!=parseInt(n.value)&&("function"==typeof n.onchange?n.onchange(n):console.log("port.onchange is not a function."),n.value=t)})}}}()}(),function(){navigator.requestGPIOAccess||(navigator.requestGPIOAccess=function(n){return new Promise(function(t,o){var r=new GPIOAccess(n);t(r)})})}(),function(){window.GPIOPortMap||(window.GPIOPortMap=Map)}(),function(){navigator.mozGpio||(navigator.mozGpio=new Object,navigator.mozGpio["export"]=function(n){},navigator.mozGpio.unexport=function(n){},navigator.mozGpio.setValue=function(n,t){console.log("setValue("+n+","+t+")")},navigator.mozGpio.getValue=function(n){return n},navigator.mozGpio.setDirection=function(n,t){console.log("setDirection("+n+","+t+")")},navigator.mozGpio.getDirection=function(){return"out"})}();