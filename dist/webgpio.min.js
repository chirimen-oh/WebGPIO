"use strict";!function(){var t=function(t){this.init(t)},r={PORTS:{CN1:[{port:256},{port:257},{port:283},{port:284},{port:196},{port:197},{port:198},{port:199},{port:244},{port:243},{port:246},{port:245}],CN2:[{port:163},{port:253},{port:252},{port:193},{port:192},{port:353}]}};t.prototype={init:function(t){var o=this;this.ports=new i;var e=function(t){return o.ports.set(t.port,new n(t.port))};r.PORTS.CN1.forEach(e),r.PORTS.CN2.forEach(e)},ports:null,unexportAll:null,onchange:null};var n=function(t){this.init(t)},o={IN:"in",OUT:"out"},e={ROW:0,HIGH:1};n.prototype={init:function(t){navigator.mozGpio["export"](t),this.portNumber=t,this.portName="",this.pinName="",this.direction="",this.exported=!1,this._interval=30,this.value=null,this._timer=null},"export":function(t){var r=this,n={"in":function(){return r._timer=setInterval(function(){return r.__checkValue(r)},r._interval)},out:function(){return r._timer?clearInterval(r._timer):0}},e=function(e,i){var u=n[t];u?(navigator.mozGpio.setDirection(r.portNumber,t===o.OUT),u(),e()):i(new Error("InvalidAccessError"))},i=function(n){return r.direction=t,r.exported=!0,n},u=function(t){return r.direction="",r.exported=!1,r.pinName="",r.portName="",Promise.reject(t)};return new Promise(e).then(i)["catch"](u)},unexport:function(t){},read:function(){var t=this,r=function(r,n){t.exported?t.__isInput()||n(new Error("OperationError")):n(new Error("InvalidAccessError")),r()},n=function(){return navigator.mozGpio.getValue(t.portNumber)};return new Promise(r).then(n)},write:function(t){var r=this,n=function(n,o){r.exported?r.__isOutput()?t!==e.ROW&&t!==e.HIGH&&o(new Error("OperationError")):o(new Error("OperationError")):o(new Error("InvalidAccessError")),n()},o=function(){return r.value=t,navigator.mozGpio.setValue(r.portNumber,r.value),r.value};return new Promise(n).then(o)},onchange:null,__isInput:function(){return this.direction===o.IN},__isOutput:function(){return this.direction===o.OUT},__checkValue:function(t){return t.read().then(function(r){parseInt(r)!=parseInt(t.value)&&("function"==typeof t.onchange?t.onchange(t):console.log("port.onchange is not a function."),t.value=r)})}};var i=Map;navigator.requestGPIOAccess||(navigator.requestGPIOAccess=function(){return new Promise(function(r){return r(new t)})}),navigator.mozGpio||(navigator.mozGpio=new Object,navigator.mozGpio["export"]=function(t){},navigator.mozGpio.unexport=function(t){},navigator.mozGpio.setValue=function(t,r){},navigator.mozGpio.getValue=function(t){return t},navigator.mozGpio.setDirection=function(t,r){},navigator.mozGpio.getDirection=function(){return"out"})}();